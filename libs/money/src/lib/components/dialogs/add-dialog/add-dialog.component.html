<div mat-dialog-title>{{ title }}</div>

<!-- <loading></loading>

<messages></messages> -->

<mat-dialog-content [formGroup]="form">
  <mat-form-field appearance="outline">
    <mat-label>kiedy</mat-label>
    <input
      matInput
      [matDatepicker]="datepicker"
      #searchInput
      formControlName="createdAt"
    />

    <mat-datepicker-toggle matSuffix [for]="datepicker">
    </mat-datepicker-toggle>

    <mat-datepicker #datepicker></mat-datepicker>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>cena</mat-label>
    <input matInput formControlName="price" dotNumber />
    @if (form.get('price')?.hasError('required')) {
    <mat-error> Podaj cenÄ™! </mat-error>
    }
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>kategoria</mat-label>
    <input
      type="text"
      matInput
      formControlName="type"
      [matAutocomplete]="auto"
    />

    <mat-autocomplete #auto="matAutocomplete">
      @for (category of categoriesFiltered$ | async; track category) {
      <mat-option [value]="category">{{ category }} </mat-option>
      }
    </mat-autocomplete>
    <button
      matSuffix
      mat-icon-button
      *ngIf="type?.value"
      (click)="type?.setValue('')"
    >
      <mat-icon>cancel</mat-icon>
    </button>
  </mat-form-field>

  <div class="divider">opcjonalnie</div>

  <mat-form-field appearance="outline">
    <mat-label>sklep</mat-label>
    <input matInput formControlName="fromWho" />
  </mat-form-field>
</mat-dialog-content>

<mat-dialog-actions>
  <button mat-button (click)="close()">zamknij</button>

  <button
    mat-raised-button
    color="primary"
    #saveButton
    [disabled]="!form.valid"
    (click)="save()"
  >
    dodaj
  </button>
</mat-dialog-actions>
