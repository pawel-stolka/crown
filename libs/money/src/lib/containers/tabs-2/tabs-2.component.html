<div class="actions">
  <div class="filters">
    <!-- <crown-year-filter
      [availableYears]="availableYears$ | async"
      (currentYear)="changeYear($event)"
    ></crown-year-filter> -->
    <!-- <crown-data-filter (filter)="applyFilter($event)"></crown-data-filter> -->
    <crown-data-filter
      (filter)="typeFilter({ type: $event })"
    ></crown-data-filter>
  </div>
  <button mat-fab color="accent" (click)="add()">
    <mat-icon>add</mat-icon>
  </button>
</div>

<button (click)="resetFilters()">resetFilters</button>
<button (click)="addYearFilter(2023)">add 2023</button>
<button (click)="addYearFilter(2024)">add 2024</button>
<button (click)="startDateFilter(000)">a12...</button>
<button (click)="endDateFilter(000)">a...12</button>

<ng-container *ngIf="filters$ | async as filters">
  <div class="help">
    <!-- <div>filters$: {{ filters | json }}</div> -->
    <div>startDate: {{ filters.startDate | json }}</div>
    <div>endDate: {{ filters.endDate | json }}</div>
    <div>type: {{ filters.type | json }}</div>
    <div>year: {{ filters.year | json }}</div>
  </div>
</ng-container>

<mat-dialog-content [formGroup]="form">
  <mat-form-field appearance="outline">
    <mat-label>od</mat-label>
    <input
      matInput
      [matDatepicker]="datepicker"
      #searchInput
      formControlName="startDate"
    />
    <!-- @if (date?.hasError('required')) {
    <mat-error> Podaj datę! </mat-error>
    } -->

    <mat-datepicker-toggle matSuffix [for]="datepicker">
    </mat-datepicker-toggle>

    <mat-datepicker #datepicker></mat-datepicker>
  </mat-form-field>
</mat-dialog-content>

<div>dateRange$ {{ range$ | async | json }}</div>

<ng-container *ngIf="filteredMoney$ | async as money; else NO_DATA">
  <ng-container *ngIf="money.length > 0; then DATA; else EMPTY"> </ng-container>
</ng-container>

<!-- <pre>{{ monthsData2$ | async | json }}</pre> -->

<ng-template #DATA>
  <mat-tab-group (selectedIndexChange)="tabChange($event)">
    <mat-tab label="{{ NEW_GROUPS_LABEL }}">
      <crown-new-groups [data]="monthsData2$ | async"></crown-new-groups>
    </mat-tab>
    <!-- <mat-tab label="{{ GROUPS_LABEL }}">
      <crown-groups-tab
        [data]="monthsData2$ | async"
        [filtered]="!!(filterPhrase$ | async)"
      ></crown-groups-tab>
    </mat-tab> -->
    <mat-tab label="{{ DETAILS_LABEL }}">
      <!-- <crown-details-tab
        [money]="(monthsData2$ | async) || undefined"
        [filter]="this.dataSource.filter"
      ></crown-details-tab> -->
      <crown-new-details-tab
        [money]="(filteredMoney$ | async) || undefined"
      ></crown-new-details-tab>
    </mat-tab>
  </mat-tab-group>
  <!-- <div *ngIf="pendingFetch$ | async" class="directory-content-loader">
    <mat-spinner [strokeWidth]="2"></mat-spinner>
  </div> -->
</ng-template>

<ng-template #EMPTY>
  <div class="empty">
    <span class="title">Nie znaleziono.</span>
  </div>
</ng-template>

<ng-template #NO_DATA>
  <div class="no-data">
    <span class="title">Nic tu jeszcze nie ma</span>
    <span class="subtitle">Dodaj coś ☝️ (+)</span>
  </div>
</ng-template>
